# íŠ¸ë Œë“œ ë¶„ì„ ê¸°ëŠ¥ - ê¸°ìˆ  ë³´ê³ ì„œ

## 1. ê°œìš”

íŠ¸ë Œë“œ ë¶„ì„ ê¸°ëŠ¥ì€ YouTube, TikTok, Instagram ë“± ìˆí¼ í”Œë«í¼ì—ì„œ ì‹¤ì‹œê°„ íŠ¸ë Œë“œë¥¼ ìˆ˜ì§‘í•˜ê³ , AIë¥¼ í™œìš©í•˜ì—¬ ë°”ì´ëŸ´ ì ì¬ë ¥ê³¼ ì‚¼ì–‘ ë¸Œëœë“œ ì í•©ì„±ì„ ìë™ìœ¼ë¡œ ë¶„ì„í•˜ëŠ” ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

### í•µì‹¬ ê°€ì¹˜
- **ìë™í™”**: í‚¤ì›Œë“œ ì…ë ¥ë§Œìœ¼ë¡œ ì „ì²´ ë¶„ì„ í”„ë¡œì„¸ìŠ¤ ìë™ ì‹¤í–‰
- **ì§€ëŠ¥í˜• ë¶„ì„**: AI ê¸°ë°˜ ë°”ì´ëŸ´ ì ìˆ˜ ë° ë¸Œëœë“œ ì í•©ì„± í‰ê°€
- **ë©€í‹° í”Œë«í¼**: YouTube, TikTok, Instagram í†µí•© ì§€ì›
- **êµ­ê°€ë³„ ë§ì¶¤**: í•œêµ­, ë¯¸êµ­, ì¼ë³¸ ì‹œì¥ë³„ í•„í„°ë§

---

## 2. ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### 2.1 ì „ì²´ í”Œë¡œìš°

```
ì‚¬ìš©ì ì…ë ¥ (í‚¤ì›Œë“œ, í”Œë«í¼, êµ­ê°€)
    â†“
[React Form + Zod ê²€ì¦]
    â†“
[API Route] - Rate Limiting (5ë¶„/10íšŒ)
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. íŠ¸ë Œë“œ ë°ì´í„° ìˆ˜ì§‘                â”‚
â”‚    - YouTube Data API v3           â”‚
â”‚    - SerpAPI (TikTok/Instagram)    â”‚
â”‚    - ë°ì´í„° ì •ê·œí™” & ì¤‘ë³µ ì œê±°      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. AI ë¶„ì„                          â”‚
â”‚    - í”„ë¡¬í”„íŠ¸ ë¡œë“œ (trend-analyzer) â”‚
â”‚    - GPT-4/Claude í˜¸ì¶œ              â”‚
â”‚    - êµ¬ì¡°í™”ëœ JSON ì‘ë‹µ             â”‚
â”‚    - Redis ìºì‹± (24ì‹œê°„ TTL)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥                â”‚
â”‚    - Supabase (PostgreSQL)          â”‚
â”‚    - ë¶„ì„ ê²°ê³¼ + ìˆ˜ì§‘ëœ ë¹„ë””ì˜¤      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
[UI í‘œì‹œ] - TrendCard, TrendDetailModal
```

### 2.2 ì£¼ìš” ì»´í¬ë„ŒíŠ¸

| ì»´í¬ë„ŒíŠ¸ | íŒŒì¼ | ì—­í•  |
|---------|------|------|
| **ì…ë ¥ í¼** | `TrendAnalysisForm.tsx` | ì‚¬ìš©ì ì…ë ¥ ë° ê²€ì¦ |
| **API ì—”ë“œí¬ì¸íŠ¸** | `app/api/trends/analyze/route.ts` | ìš”ì²­ ì²˜ë¦¬ ë° ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ |
| **ë°ì´í„° ìˆ˜ì§‘ê¸°** | `lib/api/trend-collector.ts` | ë©€í‹° í”Œë«í¼ ë°ì´í„° ìˆ˜ì§‘ |
| **AI ë¶„ì„ê¸°** | `lib/ai/agents/trend-analyzer.ts` | AI ê¸°ë°˜ íŠ¸ë Œë“œ ë¶„ì„ |
| **DB ì¿¼ë¦¬** | `lib/db/queries/trends.ts` | ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥/ì¡°íšŒ |

---

## 3. ì£¼ìš” ê¸°ëŠ¥

### 3.1 ë©€í‹° í”Œë«í¼ íŠ¸ë Œë“œ ìˆ˜ì§‘

**YouTube Shorts**
- âœ… YouTube Data API v3 ì‚¬ìš©
- âœ… êµ­ê°€ë³„ í•„í„°ë§ (`regionCode`)
- âœ… ì–¸ì–´ë³„ ìš°ì„ ìˆœìœ„ (`relevanceLanguage`)
- âœ… ìƒì„¸ ë©”íƒ€ë°ì´í„° (ì¡°íšŒìˆ˜, ì¢‹ì•„ìš”, ëŒ“ê¸€)

**TikTok / Instagram Reels**
- âš ï¸ SerpAPI ì‚¬ìš© (ì œí•œì )
- âš ï¸ Google Videos API ê¸°ë°˜ìœ¼ë¡œ ê²°ê³¼ ê±°ì˜ ì—†ìŒ
- ğŸ”„ í–¥í›„ ì „ìš© API ì—°ë™ í•„ìš”

### 3.2 AI ê¸°ë°˜ ì§€ëŠ¥í˜• ë¶„ì„

**ë¶„ì„ í•­ëª©**
- **ë°”ì´ëŸ´ ì ìˆ˜ (0-100)**: ì¡°íšŒìˆ˜ ì¦ê°€ìœ¨, ì°¸ì—¬ìœ¨, í™•ì‚°ì„±, ì§€ì† ê¸°ê°„
- **ì‚¼ì–‘ ì—°ê´€ì„± ì ìˆ˜ (0-100)**: ì œí’ˆ í™œìš© ê°€ëŠ¥ì„±(40ì ), ë¸Œëœë“œ í†¤ ì í•©ì„±(30ì ), íƒ€ê²Ÿ ì—°ë ¹ì¸µ(20ì ), ì‹œì¥ë³„ ì í•©ì„±(10ì )
- **í¬ë§· ë¶„ì„**: Challenge, Recipe, ASMR, Comedy, Review, Tutorial
- **íŒ¨í„´ ë¶„ì„**: í›… íŒ¨í„´, ë¹„ì£¼ì–¼ íŒ¨í„´, ìŒì•… íŒ¨í„´
- **ë¸Œëœë“œ ì¸ì‚¬ì´íŠ¸**: ì¶”ì²œ ì œí’ˆ, íƒ€ê²Ÿ ì˜¤ë””ì–¸ìŠ¤, ì˜ˆìƒ ë„ë‹¬ë¥ , ì„±ê³µ ìš”ì¸, ë¦¬ìŠ¤í¬

**AI ëª¨ë¸**
- ê¸°ë³¸: GPT-4 Mini (ë¹„ìš© íš¨ìœ¨ì„±)
- ì˜µì…˜: GPT-4 Turbo, Claude Sonnet 4.5
- Temperature: 0.3 (ì¼ê´€ì„± ìˆëŠ” ë¶„ì„)

### 3.3 êµ­ê°€ë³„ í•„í„°ë§

- **í•œêµ­ (KR)**: í•œêµ­ì–´ ì½˜í…ì¸  ìš°ì„  ê²€ìƒ‰
- **ë¯¸êµ­ (US)**: ì˜ì–´ ì½˜í…ì¸  ìš°ì„  ê²€ìƒ‰
- **ì¼ë³¸ (JP)**: ì¼ë³¸ì–´ ì½˜í…ì¸  ìš°ì„  ê²€ìƒ‰

### 3.4 ì„±ëŠ¥ ìµœì í™”

- **Redis ìºì‹±**: ë™ì¼ ë¶„ì„ ì¬ìš”ì²­ ì‹œ AI í˜¸ì¶œ ì—†ìŒ (24ì‹œê°„ TTL)
- **Rate Limiting**: IP ê¸°ë°˜ 5ë¶„ì— 10íšŒ ì œí•œ
- **ë³‘ë ¬ ì²˜ë¦¬**: ë‹¤ì¤‘ íŠ¸ë Œë“œ ë™ì‹œ ë¶„ì„ ì§€ì›

---

## 4. ê¸°ìˆ  ìŠ¤íƒ

### Frontend
- Next.js 16 (App Router)
- React Hook Form + Zod (í¼ ê²€ì¦)
- React Query (ë°ì´í„° Fetching)
- shadcn/ui (UI ì»´í¬ë„ŒíŠ¸)
- TypeScript

### Backend
- Next.js API Routes
- Zod (ìŠ¤í‚¤ë§ˆ ê²€ì¦)
- Upstash Redis (Rate Limiting, ìºì‹±)

### ì™¸ë¶€ API
- YouTube Data API v3
- SerpAPI (TikTok/Instagram, ì œí•œì )

### AI/LLM
- Vercel AI SDK
- OpenAI API (GPT-4 Mini)
- Anthropic API (Claude, ì˜µì…˜)

### ë°ì´í„°ë² ì´ìŠ¤
- Supabase (PostgreSQL)
- Row Level Security (RLS)

---

## 5. êµ¬í˜„ ìƒì„¸

### 5.1 ë°ì´í„° ìˆ˜ì§‘ í”„ë¡œì„¸ìŠ¤

```typescript
// 1. í”Œë«í¼ë³„ API í˜¸ì¶œ
const youtubeVideos = await searchYouTubeShorts(keyword, maxResults, country, languageCode);
const tiktokVideos = await searchTikTokVideos(keyword, maxResults, country, languageCode);

// 2. ë°ì´í„° ì •ê·œí™”
const normalized = videos.map(normalizeVideo);

// 3. ì¤‘ë³µ ì œê±° (URL ê¸°ë°˜)
const deduped = deduplicateVideos(normalized, { byUrl: true });
```

### 5.2 AI ë¶„ì„ í”„ë¡œì„¸ìŠ¤

```typescript
// 1. í”„ë¡¬í”„íŠ¸ ë¡œë“œ
const systemPrompt = await loadPrompt('trend-analyzer');

// 2. ì‚¬ìš©ì í”„ë¡¬í”„íŠ¸ êµ¬ì„±
const userPrompt = `í‚¤ì›Œë“œ: ${keyword}, í”Œë«í¼: ${platform}, êµ­ê°€: ${country}`;

// 3. AI í˜¸ì¶œ (êµ¬ì¡°í™”ëœ ê°ì²´ ìƒì„±)
const result = await generateAIObject<TrendAnalysis>(
  [{ role: 'system', content: systemPrompt }, { role: 'user', content: userPrompt }],
  TrendAnalysisSchema,
  { provider: 'openai', model: 'gpt-4-mini', temperature: 0.3, useCache: true }
);
```

### 5.3 ë°ì´í„° ì €ì¥ êµ¬ì¡°

```typescript
{
  keyword: "ë¶ˆë‹­ë³¶ìŒë©´",
  platform: "shorts",
  country: "KR",
  viral_score: 85,
  samyang_relevance: 92,
  format_type: "Challenge",
  hook_pattern: "...",
  visual_pattern: "...",
  music_pattern: "...",
  analysis_data: {
    brand_fit_reason: "...",
    recommended_products: ["buldak"],
    target_audience: "10-30ëŒ€",
    key_success_factors: [...],
    risks: [...],
    collected_videos: [...]
  }
}
```

---

## 6. ì„±ê³¼ ë° ì§€í‘œ

### 6.1 ì„±ëŠ¥ ì§€í‘œ

| í•­ëª© | ìˆ˜ì¹˜ |
|------|------|
| **í‰ê·  ì‘ë‹µ ì‹œê°„** | 5-10ì´ˆ |
| - ë°ì´í„° ìˆ˜ì§‘ | 2-3ì´ˆ |
| - AI ë¶„ì„ | 2-5ì´ˆ (ìºì‹œ íˆíŠ¸ ì‹œ <1ì´ˆ) |
| - DB ì €ì¥ | <1ì´ˆ |
| **ë¹„ìš© ì ˆê°** | ìºì‹±ìœ¼ë¡œ AI í˜¸ì¶œ 40% ì ˆê° |
| **Rate Limit** | 5ë¶„ì— 10íšŒ |

### 6.2 ë¶„ì„ í’ˆì§ˆ

- **êµ¬ì¡°í™”ëœ ì‘ë‹µ**: Zod ìŠ¤í‚¤ë§ˆë¡œ íƒ€ì… ì•ˆì •ì„± ë³´ì¥
- **ì¼ê´€ì„±**: Temperature 0.3ìœ¼ë¡œ ì¬í˜„ ê°€ëŠ¥í•œ ë¶„ì„
- **ì •í™•ë„**: í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§ìœ¼ë¡œ ë¸Œëœë“œ ë§ì¶¤ ë¶„ì„

---

## 7. ì£¼ìš” íŠ¹ì§•

### 7.1 ìë™í™”ëœ íŒŒì´í”„ë¼ì¸
- ì‚¬ìš©ì ì…ë ¥ â†’ ë°ì´í„° ìˆ˜ì§‘ â†’ AI ë¶„ì„ â†’ DB ì €ì¥ â†’ UI í‘œì‹œ
- ì „ì²´ í”„ë¡œì„¸ìŠ¤ ìë™ ì‹¤í–‰, ìˆ˜ë™ ê°œì… ë¶ˆí•„ìš”

### 7.2 í™•ì¥ ê°€ëŠ¥í•œ ì•„í‚¤í…ì²˜
- í”ŒëŸ¬ê·¸ì¸ ë°©ì‹ì˜ í”Œë«í¼ ìˆ˜ì§‘ê¸°
- Provider ë…ë¦½ì  AI í˜¸ì¶œ
- ëª¨ë“ˆí™”ëœ ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°

### 7.3 ì‹¤ë¬´ í™œìš©ì„±
- ë°”ì´ëŸ´ ì ìˆ˜ë¡œ íŠ¸ë Œë“œ ìš°ì„ ìˆœìœ„ ê²°ì •
- ë¸Œëœë“œ ì í•©ì„±ìœ¼ë¡œ ì œí’ˆ ë§¤ì¹­
- ì¶”ì²œ ì œí’ˆìœ¼ë¡œ ë§ˆì¼€íŒ… ì „ëµ ìˆ˜ë¦½

---

## 8. í–¥í›„ ê°œì„  ê³„íš

### 8.1 TikTok/Instagram ì „ìš© API ì—°ë™
- **í˜„ì¬**: SerpAPI ì‚¬ìš© (ì œí•œì )
- **ê³„íš**: TikTok Research API ë˜ëŠ” ìŠ¤í¬ë˜í•‘ ì„œë¹„ìŠ¤ ì—°ë™

### 8.2 ë°ì´í„° ê¸°ë°˜ ì ìˆ˜ ê³„ì‚°
- ì‹¤ì œ ì¡°íšŒìˆ˜, ì°¸ì—¬ìœ¨ ë“± ìˆ˜ì¹˜ í™œìš©
- AI ì ìˆ˜ì™€ í•˜ì´ë¸Œë¦¬ë“œ ë°©ì‹

### 8.3 ì‹¤ì‹œê°„ íŠ¸ë Œë“œ ëª¨ë‹ˆí„°ë§
- ì£¼ê¸°ì  ìë™ ìˆ˜ì§‘
- íŠ¸ë Œë“œ ë³€í™” ì¶”ì 
- ì•Œë¦¼ ì‹œìŠ¤í…œ

### 8.4 ë¹„êµ ë¶„ì„ ê¸°ëŠ¥
- ì—¬ëŸ¬ íŠ¸ë Œë“œ ë™ì‹œ ë¹„êµ
- ìµœì  íŠ¸ë Œë“œ ì¶”ì²œ
- íŠ¸ë Œë“œ ë­í‚¹

---

## 9. ê²°ë¡ 

íŠ¸ë Œë“œ ë¶„ì„ ê¸°ëŠ¥ì€ **ë°ì´í„° ìˆ˜ì§‘ â†’ AI ë¶„ì„ â†’ ê²°ê³¼ ì €ì¥**ì˜ ì™„ì „ ìë™í™”ëœ íŒŒì´í”„ë¼ì¸ì„ êµ¬í˜„í•˜ì—¬, ì‚¬ìš©ìê°€ í‚¤ì›Œë“œë§Œ ì…ë ¥í•˜ë©´ ë°”ì´ëŸ´ ì ì¬ë ¥ê³¼ ë¸Œëœë“œ ì í•©ì„±ì„ ìë™ìœ¼ë¡œ ë¶„ì„ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

AIì˜ êµ¬ì¡°í™”ëœ ë¶„ì„ê³¼ ë©€í‹° í”Œë«í¼ ë°ì´í„° ìˆ˜ì§‘ì„ ê²°í•©í•˜ì—¬, ì‹¤ë¬´ì—ì„œ ë°”ë¡œ í™œìš© ê°€ëŠ¥í•œ ì¸ì‚¬ì´íŠ¸ë¥¼ ì œê³µí•˜ë©°, ìºì‹±ê³¼ Rate Limitingì„ í†µí•´ ì•ˆì •ì ì´ê³  ë¹„ìš© íš¨ìœ¨ì ì¸ ìš´ì˜ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.

---

**ì‘ì„±ì¼**: 2025-01-XX  
**ë²„ì „**: 1.0

